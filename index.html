<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³ÛŒØ³ØªÙ… Ù…Ø¯ÛŒØ±ÛŒØª Ø±Ø³ØªÙˆØ±Ø§Ù† Ø´Ù‚Ø§ÛŒÙ‚</title>
    
    <!-- PWA Configuration -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#5D4037">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Ø±Ø³ØªÙˆØ±Ø§Ù† Ø´Ù‚Ø§ÛŒÙ‚">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="icon" href="icon-192.png" type="image/png">
    
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vazir-font@30.1.0/dist/font-face.css">
    <style>
        * {
            font-family: 'Vazir', sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            direction: rtl;
        }

        body {
            background-color: #FFF8E1;
            color: #5D4037;
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
            padding-bottom: 80px;
        }

        .header {
            background: linear-gradient(135deg, #5D4037 0%, #3E2723 100%);
            color: white;
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(93, 64, 55, 0.3);
        }

        .header h1 {
            font-size: 1.2rem;
            font-weight: bold;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-right: 5px solid #D4A574;
        }

        .card-title {
            color: #5D4037;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #D4A574;
            font-size: 1.1rem;
            font-weight: bold;
        }

        .btn {
            display: inline-block;
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            width: 100%;
            margin-top: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #D4A574 0%, #FFD54F 100%);
            color: #5D4037;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #A37548 0%, #D4A574 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(212, 165, 116, 0.4);
        }

        .btn-secondary {
            background: #5D4037;
            color: white;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 0.8rem;
            width: auto;
            margin: 0;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            color: #5D4037;
            font-weight: bold;
        }

        select, input, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #D4A574;
            border-radius: 10px;
            font-size: 1rem;
            background: #FFF8E1;
            color: #5D4037;
        }

        select:focus, input:focus, textarea:focus {
            outline: none;
            border-color: #5D4037;
            box-shadow: 0 0 0 3px rgba(93, 64, 55, 0.2);
        }

        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.1);
            border-top: 3px solid #D4A574;
            max-width: 500px;
            margin: 0 auto;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            color: #5D4037;
            font-size: 0.8rem;
            text-decoration: none;
        }

        .nav-item.active {
            background: #FFF8E1;
            color: #A37548;
            font-weight: bold;
        }

        .nav-item i {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .nav-item:hover {
            background: #FFF8E1;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .item-list {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #D4A574;
            border-radius: 10px;
            padding: 10px;
            background: #FFF8E1;
        }

        .item-option {
            padding: 10px;
            border-bottom: 1px solid #D4A574;
            cursor: pointer;
            transition: background 0.3s;
        }

        .item-option:hover {
            background: white;
        }

        .item-option:last-child {
            border-bottom: none;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 25px;
            border-radius: 15px;
            max-width: 90%;
            max-height: 80%;
            overflow-y: auto;
        }

        .message-preview {
            background: #FFF8E1;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            border: 1px dashed #D4A574;
            white-space: pre-wrap;
            font-family: monospace;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .persian-date {
            text-align: center;
            padding: 10px;
            background: #5D4037;
            color: white;
            border-radius: 10px;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .search-box {
            margin-bottom: 10px;
        }

        .search-box input {
            width: 100%;
            padding: 10px;
            border: 1px solid #D4A574;
            border-radius: 8px;
        }

        .list-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .list-actions .btn {
            flex: 1;
            padding: 8px;
            font-size: 0.9rem;
        }

        .customer-balance {
            background: #E8F5E9;
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
            text-align: center;
            font-weight: bold;
            color: #2E7D32;
        }

        .selected-items-container {
            margin-top: 15px;
            padding: 15px;
            border: 2px dashed #D4A574;
            border-radius: 10px;
            background: #FFF8E1;
        }

        .selected-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin-bottom: 10px;
            background: white;
            border-radius: 8px;
            border: 1px solid #D4A574;
        }

        .selected-item:last-child {
            margin-bottom: 0;
        }

        .item-details {
            flex-grow: 1;
        }

        .item-name {
            font-weight: bold;
            color: #5D4037;
            margin-bottom: 5px;
        }

        .item-quantity {
            color: #666;
            font-size: 0.9rem;
        }

        .item-price {
            color: #2E7D32;
            font-weight: bold;
        }

        .remove-item {
            color: #F44336;
            cursor: pointer;
            margin-right: 10px;
            font-size: 1.2rem;
        }

        .multi-item-form {
            display: none;
            margin-top: 15px;
            padding: 15px;
            border: 1px solid #D4A574;
            border-radius: 10px;
            background: #FFF8E1;
        }

        .multi-item-form.active {
            display: block;
        }

        .add-item-btn {
            background: #5D4037;
            color: white;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            display: inline-block;
            margin-top: 10px;
        }

        .selected-items-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .clear-all-btn {
            background: #F44336;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8rem;
            cursor: pointer;
        }

        .tab-switcher {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 2px solid #D4A574;
        }

        .tab-switch {
            flex: 1;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab-switch.active {
            border-bottom: 3px solid #D4A574;
            font-weight: bold;
            color: #5D4037;
        }

        .tab-switch:hover {
            background: #FFF8E1;
        }

        .inventory-tabs {
            display: none;
        }

        .inventory-tabs.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ¢ Ø±Ø³ØªÙˆØ±Ø§Ù† Ø´Ù‚Ø§ÛŒÙ‚</h1>
        <div class="persian-date" id="currentDate"></div>
    </div>

    <div id="inventoryTab" class="tab-content active">
        <div class="card">
            <div class="card-title">ğŸ“¦ Ø«Ø¨Øª ÙˆØ±ÙˆØ¯/Ø®Ø±ÙˆØ¬ Ø§Ù†Ø¨Ø§Ø±</div>
            
            <div class="tab-switcher">
                <div class="tab-switch active" onclick="switchInventoryMode('single')">ØªÚ© Ú©Ø§Ù„Ø§</div>
                <div class="tab-switch" onclick="switchInventoryMode('multi')">Ú†Ù†Ø¯ Ú©Ø§Ù„Ø§</div>
            </div>
            
            <!-- Ø­Ø§Ù„Øª ØªÚ© Ú©Ø§Ù„Ø§ÛŒÛŒ -->
            <div id="singleItemTab" class="inventory-tabs active">
                <div class="form-group">
                    <label>Ù†ÙˆØ¹ Ø¹Ù…Ù„ÛŒØ§Øª:</label>
                    <select id="inventoryType">
                        <option value="in">âœ… ÙˆØ±ÙˆØ¯ Ú©Ø§Ù„Ø§</option>
                        <option value="out">ğŸ”» Ø®Ø±ÙˆØ¬ Ú©Ø§Ù„Ø§</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø§Ù„Ø§:</label>
                    <input type="text" id="itemSearch" placeholder="Ø¬Ø³ØªØ¬ÙˆÛŒ Ú©Ø§Ù„Ø§..." class="search-box">
                    <div class="item-list" id="itemList"></div>
                </div>
                <div class="form-group">
                    <label>Ù…Ù‚Ø¯Ø§Ø±:</label>
                    <input type="number" id="quantity" placeholder="Ù…Ø«Ø§Ù„: 5" min="1">
                </div>
                <div class="form-group">
                    <label>Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯ (Ø±ÛŒØ§Ù„):</label>
                    <input type="number" id="price" placeholder="ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ ÙˆØ±ÙˆØ¯" min="0">
                </div>
                <div class="form-group">
                    <label>ØªÙˆØ¶ÛŒØ­Ø§Øª:</label>
                    <textarea id="inventoryDesc" rows="2" placeholder="Ø´Ù…Ø§Ø±Ù‡ ÙØ§Ú©ØªÙˆØ±ØŒ ØªÙˆØ¶ÛŒØ­ Ø®Ø§Øµ..."></textarea>
                </div>
                <button class="btn btn-primary" onclick="createSingleInventoryCard()">Ø§ÛŒØ¬Ø§Ø¯ Ùˆ Ø§Ø±Ø³Ø§Ù„ Ú©Ø§Ø±Øª Ø§Ù†Ø¨Ø§Ø±</button>
            </div>
            
            <!-- Ø­Ø§Ù„Øª Ú†Ù†Ø¯ Ú©Ø§Ù„Ø§ÛŒÛŒ -->
            <div id="multiItemTab" class="inventory-tabs">
                <div class="form-group">
                    <label>Ù†ÙˆØ¹ Ø¹Ù…Ù„ÛŒØ§Øª:</label>
                    <select id="multiInventoryType">
                        <option value="in">âœ… ÙˆØ±ÙˆØ¯ Ú©Ø§Ù„Ø§</option>
                        <option value="out">ğŸ”» Ø®Ø±ÙˆØ¬ Ú©Ø§Ù„Ø§</option>
                    </select>
                </div>
                
                <div class="selected-items-container" id="multiSelectedItemsContainer" style="display: none;">
                    <div class="selected-items-header">
                        <h4>Ú©Ø§Ù„Ø§Ù‡Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡ (<span id="selectedItemsCount">0</span>)</h4>
                        <div class="clear-all-btn" onclick="clearAllSelectedItems()">Ø­Ø°Ù Ù‡Ù…Ù‡</div>
                    </div>
                    <div id="selectedItemsList"></div>
                </div>
                
                <div class="form-group">
                    <label>Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ù„Ø§:</label>
                    <input type="text" id="multiItemSearch" placeholder="Ø¬Ø³ØªØ¬ÙˆÛŒ Ú©Ø§Ù„Ø§..." class="search-box">
                    <div class="item-list" id="multiItemList"></div>
                </div>
                
                <div id="multiItemForm" class="multi-item-form">
                    <div class="form-group">
                        <label>Ù…Ù‚Ø¯Ø§Ø±:</label>
                        <input type="number" id="multiQuantity" placeholder="Ù…Ø«Ø§Ù„: 5" min="1">
                    </div>
                    <div class="form-group">
                        <label>Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯ (Ø±ÛŒØ§Ù„):</label>
                        <input type="number" id="multiPrice" placeholder="ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ ÙˆØ±ÙˆØ¯" min="0">
                    </div>
                    <button class="btn btn-small btn-primary" onclick="addToMultiItemsList()">Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ù„ÛŒØ³Øª</button>
                </div>
                
                <div class="form-group">
                    <label>ØªÙˆØ¶ÛŒØ­Ø§Øª Ú©Ù„ÛŒ:</label>
                    <textarea id="multiInventoryDesc" rows="2" placeholder="Ø´Ù…Ø§Ø±Ù‡ ÙØ§Ú©ØªÙˆØ±ØŒ ØªÙˆØ¶ÛŒØ­ Ø®Ø§Øµ..."></textarea>
                </div>
                <button class="btn btn-primary" onclick="createMultiInventoryCard()">Ø§ÛŒØ¬Ø§Ø¯ Ùˆ Ø§Ø±Ø³Ø§Ù„ Ú©Ø§Ø±Øª Ú†Ù†Ø¯ Ú©Ø§Ù„Ø§ÛŒÛŒ</button>
            </div>
            
            <div class="message-preview" id="inventoryPreview" style="display: none;"></div>
        </div>
    </div>

    <!-- Ø³Ø§ÛŒØ± ØªØ¨â€ŒÙ‡Ø§ Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ± Ø¨Ø§Ù‚ÛŒ Ù…ÛŒâ€ŒÙ…Ø§Ù†Ù†Ø¯ -->
    <div id="personnelTab" class="tab-content">
        <div class="card">
            <div class="card-title">ğŸ‘¥ Ù¾Ø±Ø¯Ø§Ø®Øª Ø¨Ù‡ Ù¾Ø±Ø³Ù†Ù„</div>
            <div class="form-group">
                <label>Ø§Ù†ØªØ®Ø§Ø¨ Ù¾Ø±Ø³Ù†Ù„:</label>
                <select id="employeeSelect"></select>
            </div>
            <div class="form-group">
                <label>Ù†ÙˆØ¹ Ù¾Ø±Ø¯Ø§Ø®Øª:</label>
                <select id="paymentType">
                    <option value="salary">ğŸ’° Ø­Ù‚ÙˆÙ‚</option>
                    <option value="advance">ğŸ’¸ Ù…Ø³Ø§Ø¹Ø¯Ù‡</option>
                    <option value="food">ğŸ² Ø­Ù‚ ØºØ°Ø§</option>
                    <option value="bonus">ğŸ Ù¾Ø§Ø¯Ø§Ø´</option>
                    <option value="other">ğŸ“¤ Ø³Ø§ÛŒØ±</option>
                </select>
            </div>
            <div class="form-group">
                <label>Ù…Ø¨Ù„Øº (Ø±ÛŒØ§Ù„):</label>
                <input type="number" id="amount" placeholder="Ù…Ø¨Ù„Øº Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯" min="1">
            </div>
            <div class="form-group">
                <label>Ø¯ÙˆØ±Ù‡ (Ø¨Ø±Ø§ÛŒ Ø­Ù‚ÙˆÙ‚):</label>
                <input type="text" id="period" placeholder="Ù…Ø«Ø§Ù„: Ù…Ù‡Ø± Û±Û´Û°Û³">
            </div>
            <div class="form-group">
                <label>ØªÙˆØ¶ÛŒØ­Ø§Øª:</label>
                    <textarea id="personnelDesc" rows="2" placeholder="Ø¨Ø§Ø¨Øª Ø§Ø¶Ø§ÙÙ‡â€ŒÚ©Ø§Ø±ÛŒØŒ ØºÛŒØ¨Øª..."></textarea>
            </div>
            <button class="btn btn-primary" onclick="createPersonnelCard()">Ø§ÛŒØ¬Ø§Ø¯ Ùˆ Ø§Ø±Ø³Ø§Ù„ Ú©Ø§Ø±Øª Ù¾Ø±Ø¯Ø§Ø®Øª</button>
            <div class="message-preview" id="personnelPreview" style="display: none;"></div>
        </div>
    </div>

    <div id="customersTab" class="tab-content">
        <div class="card">
            <div class="card-title">ğŸ¤ Ù…Ø´ØªØ±ÛŒØ§Ù† Ø¯Ø§Ø¦Ù…ÛŒ</div>
            <div class="form-group">
                <label>Ø§Ù†ØªØ®Ø§Ø¨ Ù…Ø´ØªØ±ÛŒ:</label>
                <select id="customerSelect"></select>
            </div>
            <div class="form-group">
                <label>Ù†ÙˆØ¹ ØªØ±Ø§Ú©Ù†Ø´:</label>
                <select id="customerTransactionType">
                    <option value="buy">ğŸ›’ Ø®Ø±ÛŒØ¯ Ø§Ø² Ù…Ø´ØªØ±ÛŒ</option>
                    <option value="sell">ğŸ’° ÙØ±ÙˆØ´ Ø¨Ù‡ Ù…Ø´ØªØ±ÛŒ</option>
                    <option value="payment">ğŸ’³ Ù¾Ø±Ø¯Ø§Ø®Øª Ø¨Ù‡ Ù…Ø´ØªØ±ÛŒ</option>
                    <option value="receive">ğŸ’µ Ø¯Ø±ÛŒØ§ÙØª Ø§Ø² Ù…Ø´ØªØ±ÛŒ</option>
                </select>
            </div>
            <div class="form-group">
                <label>Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø§Ù„Ø§ (Ø¨Ø±Ø§ÛŒ Ø®Ø±ÛŒØ¯/ÙØ±ÙˆØ´):</label>
                <select id="customerItemSelect"></select>
            </div>
            <div class="form-group">
                <label>Ù…Ù‚Ø¯Ø§Ø±:</label>
                <input type="number" id="customerQuantity" placeholder="Ù…Ù‚Ø¯Ø§Ø±" min="0.01" step="0.01">
            </div>
            <div class="form-group">
                <label>Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯ (Ø±ÛŒØ§Ù„):</label>
                <input type="number" id="customerPrice" placeholder="Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯" min="0">
            </div>
            <div class="form-group">
                <label>Ù…Ø¨Ù„Øº Ù†Ù‚Ø¯ÛŒ (Ø¨Ø±Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø®Øª/Ø¯Ø±ÛŒØ§ÙØª):</label>
                <input type="number" id="customerCashAmount" placeholder="Ù…Ø¨Ù„Øº Ù†Ù‚Ø¯ÛŒ" min="0">
            </div>
            <div class="form-group">
                <label>ØªÙˆØ¶ÛŒØ­Ø§Øª:</label>
                <textarea id="customerDesc" rows="2" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª ØªØ±Ø§Ú©Ù†Ø´..."></textarea>
            </div>
            <div id="customerBalanceDisplay" class="customer-balance" style="display: none;">
                Ù…Ø§Ù†Ø¯Ù‡ Ø­Ø³Ø§Ø¨: <span id="customerBalance">0</span> Ø±ÛŒØ§Ù„
            </div>
            <button class="btn btn-primary" onclick="createCustomerTransaction()">Ø«Ø¨Øª ØªØ±Ø§Ú©Ù†Ø´</button>
            <div class="message-preview" id="customerPreview" style="display: none;"></div>
        </div>
    </div>

    <div id="expensesTab" class="tab-content">
        <div class="card">
            <div class="card-title">ğŸ’¸ Ø«Ø¨Øª Ù‡Ø²ÛŒÙ†Ù‡ Ù…ØªÙØ±Ù‚Ù‡</div>
            <div class="form-group">
                <label>Ø¹Ù†ÙˆØ§Ù† Ù‡Ø²ÛŒÙ†Ù‡:</label>
                <input type="text" id="expenseTitle" placeholder="Ù…Ø«Ø§Ù„: Ù‚Ø¨Ø¶ Ø¨Ø±Ù‚ØŒ Ú©Ø±Ø§ÛŒÙ‡ Ø­Ù…Ù„...">
            </div>
            <div class="form-group">
                <label>Ù…Ø¨Ù„Øº (Ø±ÛŒØ§Ù„):</label>
                <input type="number" id="expenseAmount" placeholder="Ù…Ø¨Ù„Øº Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯" min="1">
            </div>
            <div class="form-group">
                <label>ØªÙˆØ¶ÛŒØ­Ø§Øª:</label>
                <textarea id="expenseDesc" rows="2" placeholder="Ø´Ù…Ø§Ø±Ù‡ Ù‚Ø¨Ø¶ØŒ ØªÙˆØ¶ÛŒØ­ Ø§Ø¶Ø§ÙÙ‡..."></textarea>
            </div>
            <button class="btn btn-primary" onclick="createExpenseCard()">Ø§ÛŒØ¬Ø§Ø¯ Ùˆ Ø§Ø±Ø³Ø§Ù„ Ú©Ø§Ø±Øª Ù‡Ø²ÛŒÙ†Ù‡</button>
            <div class="message-preview" id="expensePreview" style="display: none;"></div>
        </div>
    </div>

    <div id="reportTab" class="tab-content">
        <div class="card">
            <div class="card-title">ğŸ“Š Ú¯Ø²Ø§Ø±Ø´ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø±ÙˆØ²Ø§Ù†Ù‡</div>
            <div style="text-align: center; padding: 20px;">
                <p>Ø¨Ø§ Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ Ø²ÛŒØ±ØŒ Ú¯Ø²Ø§Ø±Ø´ Ú©Ø§Ù…Ù„ Ø§Ù…Ø±ÙˆØ² ØªÙˆÙ„ÛŒØ¯ Ùˆ Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p>
                <button class="btn btn-secondary" onclick="createDailyReport()" style="width: 200px;">ğŸ“¨ Ø§ÛŒØ¬Ø§Ø¯ Ùˆ Ø§Ø±Ø³Ø§Ù„ Ú¯Ø²Ø§Ø±Ø´ Ø±ÙˆØ²</button>
            </div>
            <div class="message-preview" id="reportPreview" style="display: none;"></div>
        </div>
    </div>

    <div id="settingsTab" class="tab-content">
        <div class="card">
            <div class="card-title">âš™ï¸ Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª</div>
            <div style="margin-bottom: 20px;">
                <h4>ğŸ“¦ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ù„Ø§Ù‡Ø§</h4>
                <input type="text" id="newItemName" placeholder="Ù†Ø§Ù… Ú©Ø§Ù„Ø§" style="margin-bottom: 10px;">
                <input type="text" id="newItemUnit" placeholder="ÙˆØ§Ø­Ø¯ Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÚ¯ÛŒØ±ÛŒ" style="margin-bottom: 10px;">
                <div class="list-actions">
                    <button class="btn btn-primary" onclick="addItem()">â• Ø§ÙØ²ÙˆØ¯Ù†</button>
                    <button class="btn btn-secondary" onclick="editItem()">âœï¸ ÙˆÛŒØ±Ø§ÛŒØ´</button>
                    <button class="btn" onclick="deleteItem()" style="background: #F44336; color: white;">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                </div>
                <div class="item-list" id="itemsList" style="margin-top: 10px;"></div>
            </div>
            
            <div style="margin-bottom: 20px;">
                <h4>ğŸ‘¥ Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ø±Ø³Ù†Ù„</h4>
                <input type="text" id="newEmployeeName" placeholder="Ù†Ø§Ù… Ù¾Ø±Ø³Ù†Ù„" style="margin-bottom: 10px;">
                <div class="list-actions">
                    <button class="btn btn-primary" onclick="addEmployee()">â• Ø§ÙØ²ÙˆØ¯Ù†</button>
                    <button class="btn btn-secondary" onclick="editEmployee()">âœï¸ ÙˆÛŒØ±Ø§ÛŒØ´</button>
                    <button class="btn" onclick="deleteEmployee()" style="background: #F44336; color: white;">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                </div>
                <div class="item-list" id="employeesList" style="margin-top: 10px;"></div>
            </div>
            
            <div>
                <h4>ğŸ¤ Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø´ØªØ±ÛŒØ§Ù†</h4>
                <input type="text" id="newCustomerName" placeholder="Ù†Ø§Ù… Ù…Ø´ØªØ±ÛŒ" style="margin-bottom: 10px;">
                <div class="list-actions">
                    <button class="btn btn-primary" onclick="addCustomer()">â• Ø§ÙØ²ÙˆØ¯Ù†</button>
                    <button class="btn btn-secondary" onclick="editCustomer()">âœï¸ ÙˆÛŒØ±Ø§ÛŒØ´</button>
                    <button class="btn" onclick="deleteCustomer()" style="background: #F44336; color: white;">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                </div>
                <div class="item-list" id="customersList" style="margin-top: 10px;"></div>
            </div>
        </div>
    </div>

    <div class="bottom-nav">
        <a href="#" class="nav-item active" onclick="showTab('inventoryTab')"><i class="material-icons">inventory</i>Ø§Ù†Ø¨Ø§Ø±</a>
        <a href="#" class="nav-item" onclick="showTab('personnelTab')"><i class="material-icons">people</i>Ù¾Ø±Ø³Ù†Ù„</a>
        <a href="#" class="nav-item" onclick="showTab('customersTab')"><i class="material-icons">handshake</i>Ù…Ø´ØªØ±ÛŒØ§Ù†</a>
        <a href="#" class="nav-item" onclick="showTab('expensesTab')"><i class="material-icons">receipt</i>Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§</a>
        <a href="#" class="nav-item" onclick="showTab('reportTab')"><i class="material-icons">assessment</i>Ú¯Ø²Ø§Ø±Ø´</a>
        <a href="#" class="nav-item" onclick="showTab('settingsTab')"><i class="material-icons">settings</i>ØªÙ†Ø¸ÛŒÙ…Ø§Øª</a>
    </div>

    <div class="modal" id="alertModal">
        <div class="modal-content">
            <h3 style="color: #5D4037; margin-bottom: 20px;" id="alertTitle"></h3>
            <div id="alertMessage" style="margin-bottom: 20px;"></div>
            <button class="btn btn-primary" onclick="closeAlert()">Ù…ØªÙˆØ¬Ù‡ Ø´Ø¯Ù…</button>
        </div>
    </div>

    <div class="modal" id="confirmModal">
        <div class="modal-content">
            <h3 style="color: #5D4037; margin-bottom: 20px;">ØªØ£ÛŒÛŒØ¯ Ø§Ø±Ø³Ø§Ù„</h3>
            <div id="confirmMessage" style="margin-bottom: 20px;"></div>
            <div style="display: flex; gap: 10px;">
                <button class="btn btn-primary" onclick="sendConfirmedMessage()">âœ… Ø§Ø±Ø³Ø§Ù„</button>
                <button class="btn" onclick="closeModal()" style="background: #F44336; color: white;">âŒ Ù„ØºÙˆ</button>
            </div>
        </div>
    </div>

    <script>
        const items = [
            {id: 1, name: "Ø¸Ø±Ù ØªÚ© Ù¾Ø±Ø³ÛŒ Ø¢Ù„ÙˆÙ…ÛŒÙ†ÛŒÙˆÙ…ÛŒ", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 2, name: "Ø¸Ø±Ù Ú©Ø¨Ø§Ø¨ÛŒ Ø¯ÙˆØ®Ø§Ù†Ù‡", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 3, name: "Ø¸Ø±Ù Ú©Ø¨Ø§Ø¨ÛŒ Ø¢Ù„ÙˆÙ…ÛŒÙ†ÛŒÙˆÙ…ÛŒ", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 4, name: "Ø¸Ø±Ù Ø³Ù‡ Ù¾Ø±Ø³ÛŒ Ø¢Ù„ÙˆÙ…ÛŒÙ†ÛŒÙˆÙ…ÛŒ", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 5, name: "Ø¸Ø±Ù Ø²ÛŒØªÙˆÙ†", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 6, name: "Ø¯ÛŒØ³ Ú©Ø¨Ø§Ø¨ÛŒ Ú†ÛŒÙ†ÛŒ", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 7, name: "Ø¨Ø´Ù‚Ø§Ø¨ Ø¨Ø±Ù†Ø¬", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 8, name: "Ø´Ú©Ø±", unit: "Ø¨Ø³ØªÙ‡"},
            {id: 9, name: "Ø¸Ø±Ù Ú¯ÙˆØ¯ Ø§Ú©Ø¨Ø± Ø¬ÙˆØ¬Ù‡", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 10, name: "Ø¸Ø±Ù Ù¾Ù†ÛŒØ± Ú¯Ø±Ø¯Ùˆ", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 11, name: "Ú©Ø§Ø³Ù‡ Ø³ÙˆÙ¾", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 12, name: "Ú©ØªØ±ÛŒ", unit: "Ø¹Ø¯Ø¯"},
            {id: 13, name: "Ù„ÛŒÙˆØ§Ù† Ú†Ø§ÛŒ", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 14, name: "Ø¨Ø´Ù‚Ø§Ø¨ Ø§Ù…Ù„Øª", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 15, name: "Ù‚Ù†Ø¯ Û³ Ú©ÛŒÙ„ÙˆÛŒÛŒ Ú©Ø§ØªØ±ÛŒÙ†", unit: "Ú¯ÛŒÙ„Ùˆ"},
            {id: 16, name: "Ø³Ø³ ÙØ±Ø§Ù†Ø³ÙˆÛŒ ØªÚ©", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 17, name: "Ø±Ø¨ Ø§Ù†Ø§Ø± ØªÚ© Ù†ÙØ±Ù‡", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 18, name: "Ø³Ø³ Ø¯Ø¨Ù‡ Û±Û° Ú©ÛŒÙ„ÙˆÛŒÛŒ", unit: "Ø¯Ø¨Ù‡"},
            {id: 19, name: "Ø³Ø³ Ú¯Ù„ÙˆØ±ÛŒØ§", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 20, name: "Ù†Ù…Ú© Ù¾Ø§Ø´", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 21, name: "Ù…Ø§ÛŒØ¹ Ø¯ÙˆØ¯ÛŒ", unit: "Ø¹Ø¯Ø¯"},
            {id: 22, name: "Ø³Ø³ Ø´Ú©Ù„Ø§Øª", unit: "Ø¹Ø¯Ø¯"},
            {id: 23, name: "Ù†Ù…Ú©", unit: "Ø¨Ø³ØªÙ‡"},
            {id: 24, name: "Ø±Ø¨ Ø§Ù…Ù„Øª", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 25, name: "Ø±Ø¨ Ù…Ø­Ù„ÛŒ", unit: "Ø¯Ø¨Ù‡"},
            {id: 26, name: "Ø¢Ø¨Ù„ÛŒÙ…Ùˆ 1.5", unit: "Ø¨Ø³ØªÙ‡"},
            {id: 27, name: "Ø¢Ø¨Ù„ÛŒÙ…Ùˆ 1.250", unit: "Ø¹Ø¯Ø¯"},
            {id: 28, name: "Ø¢Ø¨ Ù†Ø§Ø±Ù†Ø¬ 1.5", unit: "Ø¹Ø¯Ø¯"},
            {id: 29, name: "Ø³Ø±Ú©Ù‡ Ù‚Ø²ÙˆÛŒÙ† 9.5", unit: "Ø¹Ø¯Ø¯"},
            {id: 30, name: "Ø³Ø±Ú©Ù‡ Ø¯Ø³Øª Ú†ÛŒÙ† Û´", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 31, name: "Ú©ÛŒØ³Ù‡ ÙØ±ÛŒØ²Ø± Ø±ÙˆÙ„ÛŒ", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 32, name: "Ú©ÛŒØ³Ù‡ ÙØ±ÛŒØ²Ø± Ø¨Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 33, name: "Ø±ÙˆØºÙ† Ù„Ø§Ø¯Ù† Û±Û¶ Ú©ÛŒÙ„ÙˆÛŒÛŒ", unit: "Ø¹Ø¯Ø¯"},
            {id: 34, name: "Ù…Ø§ÛŒØ¹ Ø¯Ø³ØªØ´ÙˆÛŒÛŒ", unit: "Ø¹Ø¯Ø¯"},
            {id: 35, name: "Ù…Ø§ÛŒØ¹ Ø¸Ø±ÙØ´ÙˆÛŒÛŒ", unit: "Ø¹Ø¯Ø¯"},
            {id: 36, name: "Ù„ÛŒÙˆØ§Ù† Ú©Ø§ØºØ°ÛŒ", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 37, name: "Ù„ÛŒÙˆØ§Ù† Ú©Ø§ØºØ°ÛŒ Ú©Ø§ÙÙ‡", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 38, name: "Ù„ÛŒÙˆØ§Ù† Ù¾Ù„Ø§Ø³ØªÛŒÚ©ÛŒ", unit: "Ø¨Ø³ØªÙ‡"},
            {id: 39, name: "Ú†Ø§Ù‚Ùˆ ÛŒÚ©Ø¨Ø§Ø± Ù…ØµØ±Ù", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 40, name: "Ú†Ù†Ú¯Ø§Ù„ ÛŒÚ©Ø¨Ø§Ø± Ù…ØµØ±Ù", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 41, name: "Ú†Ø§Ù‚Ùˆ Ø§Ù… Ø¬ÛŒ Ù¾Ù„Ø§Ø³Øª", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 42, name: "Ù‚Ø§Ø´Ù‚ Ú©ÙˆÚ†Ú©", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 43, name: "Ø³ÙØ±Ù‡", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 44, name: "Ø¨Ø±Ù†Ø¬ Ø®Ø§Ø·Ø±Ù‡ 40 Ú©ÛŒÙ„Ùˆ", unit: "Ú©ÛŒØ³Ù‡"},
            {id: 45, name: "Ø¹Ø¯Ø³ Û²Ûµ Ú©ÛŒÙ„ÙˆÛŒÛŒ", unit: "Ú©ÛŒØ³Ù‡"},
            {id: 46, name: "Ø¹Ø¯Ø³ ÛµÛ° Ú©ÛŒÙ„ÙˆÛŒÛŒ", unit: "Ú©ÛŒØ³Ù‡"},
            {id: 47, name: "Ø¬Ùˆ Ù¾ÙˆØ³Øª Ú©Ù†Ø¯Ù‡", unit: "Ú©ÛŒØ³Ù‡"},
            {id: 48, name: "Ù„ÙˆØ¨ÛŒØ§ Ú†ÛŒØªÛŒ", unit: "Ú©ÛŒØ³Ù‡"},
            {id: 49, name: "Ù„Ù¾Ù‡", unit: "Ú©ÛŒØ³Ù‡"},
            {id: 50, name: "Ù„ÙˆØ¨ÛŒØ§ Ù‚Ø±Ù…Ø²", unit: "Ú©ÛŒØ³Ù‡"},
            {id: 51, name: "Ú†Ø§ÛŒ Ø¯Ùˆ ØºØ²Ø§Ù„", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 52, name: "Ø¢Ù„Ùˆ Ø¨Ø®Ø§Ø±Ø§", unit: "Ø¨Ø³ØªÙ‡"},
            {id: 53, name: "ÙˆØ§ÛŒØªÚ©Ø³ Û´ Ù„ÛŒØªØ±ÛŒ", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 54, name: "Ø¬Ø±Ù…Ú¯ÛŒØ±", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 55, name: "Ø±Ø¨ Ø§Ù†Ø§Ø±", unit: "Ø¨Ø³ØªÙ‡"},
            {id: 56, name: "Ø®ÛŒØ§Ø±Ø´ÙˆØ± Ø¯Ø¨Ù‡â€ŒØ§ÛŒ", unit: "Ø¯Ø¨Ù‡"},
            {id: 57, name: "Ù¾Ù„Ø§Ø³ØªÛŒÚ© Ú†Ø§Ù¾ÛŒ Ø±Ø³ØªÙˆØ±Ø§Ù†", unit: "Ø¨Ø³ØªÙ‡"},
            {id: 58, name: "Ø±ÙˆÙ„ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø´ÛŒØ±ÛŒÙ†Ú¯", unit: "Ø¹Ø¯Ø¯"},
            {id: 59, name: "Ù…Ø§Ø³Øª Ø¯Ø¨Ù‡ Û±Û° Ú©ÛŒÙ„ÙˆÛŒÛŒ", unit: "Ø¯Ø¨Ù‡"},
            {id: 60, name: "Ø´ÛŒØ±", unit: "Ø¯Ø¨Ù‡"},
            {id: 61, name: "Ù…Ø§Ø³Øª Ù…ÙˆØ³ÛŒØ± Û±Û°Û° Ú¯Ø±Ù…ÛŒ", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 62, name: "Ø³Ø¨Ø²ÛŒ Ù¾Ù„ÙˆÛŒÛŒ", unit: ""},
            {id: 63, name: "ÙÙ„ÙÙ„ Ø³ÛŒØ§Ù‡ Û±Û° Ú©ÛŒÙ„ÙˆÛŒÛŒ", unit: "Ú¯ÛŒÙ„Ùˆ"},
            {id: 64, name: "Ø²Ø±Ø¯Ú†ÙˆØ¨Ù‡ Û±Û° Ú©ÛŒÙ„ÙˆÛŒÛŒ", unit: "Ú¯ÛŒÙ„Ùˆ"},
            {id: 65, name: "Ø³Ø¨Ø²ÛŒ Ø¯Ù„Ø§Ù„", unit: ""},
            {id: 66, name: "Ø³Ø¨Ø²ÛŒ Ù‚ÙˆØ±Ù…Ù‡ Ø³Ø¨Ø²ÛŒ", unit: ""},
            {id: 67, name: "Ø¯Ø³ØªÙ…Ø§Ù„ Ø³Ø§Ø¯Ù‡ Ø±ÙˆÙ…ÛŒØ²ÛŒ", unit: "Ø¨Ø³ØªÙ‡"},
            {id: 68, name: "Ø¯Ø³ØªÙ…Ø§Ù„ Ø¶Ø®ÛŒÙ… ØªÙˆØ§Ù„Øª", unit: "Ø¨Ø³ØªÙ‡"},
            {id: 69, name: "Ù†ÙˆØ´Ø§Ø¨Ù‡ Ù‚ÙˆØ·ÛŒ", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 70, name: "Ù†ÙˆØ´Ø§Ø¨Ù‡ Ø¨Ø·Ø±ÛŒ Ø²Ø±Ø¯", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 71, name: "Ø´ÛŒØ´Ù‡ Ø´ÙˆØ±", unit: "Ø¹Ø¯Ø¯"},
            {id: 72, name: "Ø¢Ø¨ Ù…Ø¹Ø¯Ù†ÛŒ", unit: "Ø¨Ø³ØªÙ‡"},
            {id: 73, name: "ØªØ±Ø´ÛŒ Ù‡Ø§Ù„ÙˆÙ¾ÛŒÙ†Ùˆ", unit: "Ø¹Ø¯Ø¯"},
            {id: 74, name: "Ø§Ú©Ø¨Ø± Ø¬ÙˆØ¬Ù‡", unit: "Ú©Ø§Ø±ØªÙ†"},
            {id: 75, name: "ÙÛŒÙ„Ù‡ Ø¨Ø±Ù‡", unit: "Ú©ÛŒÙ„Ùˆ"},
            {id: 76, name: "Ø´Ù†ÛŒØ³Ù„ Ø³ÛŒÙ†Ù‡", unit: "Ú©ÛŒÙ„Ùˆ"},
            {id: 77, name: "Ø´Ù†ÛŒØ³Ù„ Ø±Ø§Ù†", unit: "Ú©ÛŒÙ„Ùˆ"},
            {id: 78, name: "ÙÛŒÙ„Ù‡ Ù…Ø±Øº", unit: "Ú©ÛŒÙ„Ùˆ"},
            {id: 79, name: "Ù†Ø®ÙˆØ¯ÛŒ", unit: "Ú©ÛŒÙ„Ùˆ"},
            {id: 80, name: "Ù‚Ù„ÙˆÙ‡â€ŒÚ¯Ø§Ù‡ Ø¨Ø±Ù‡", unit: "Ú©ÛŒÙ„Ùˆ"},
            {id: 81, name: "Ú©ØªÙ Ùˆ Ø¨Ø§Ù„", unit: "Ú©ÛŒÙ„Ùˆ"},
            {id: 82, name: "Ø±Ø§Ù† Ù…Ø±Øº", unit: "Ú©ÛŒÙ„Ùˆ"},
            {id: 83, name: "Ú©Ø±Ù‡ Ú©Ù†Ø§Ø± Ø¨Ø±Ù†Ø¬", unit: "Ú©ÛŒÙ„Ùˆ"},
            {id: 84, name: "Ø·Ø±Ø­ Ø­ÛŒÙˆØ§Ù†ÛŒ", unit: "Ú©ÛŒÙ„Ùˆ"},
            {id: 85, name: "Ø¨Ø±Ú¯Ø±", unit: "Ú©ÛŒÙ„Ùˆ"},
            {id: 86, name: "Ø´ÛŒØ´Ù„ÛŒÚ© Ø¢Ù…Ù„", unit: "Ú©ÛŒÙ„Ùˆ"},
            {id: 87, name: "Ø´ÛŒØ´Ù„ÛŒÚ© Ù…Ø´Ù‡Ø¯", unit: "Ú©ÛŒÙ„Ùˆ"},
            {id: 88, name: "Ù…Ø§Ù‡ÛŒÚ†Ù‡ Ø¨Ø±Ù‡", unit: "Ú©ÛŒÙ„Ùˆ"},
            {id: 89, name: "Ú¯Ø±Ø¯Ù† Ø¨Ø±Ù‡", unit: "Ú©ÛŒÙ„Ùˆ"},
            {id: 90, name: "Ø³Ø¨Ø²ÛŒ Ø´Ú©Ù… Ù¾Ø±", unit: "Ú©ÛŒÙ„Ùˆ"},
            {id: 91, name: "Ø²Ø±Ø´Ú©", unit: "Ú©ÛŒÙ„Ùˆ"},
            {id: 92, name: "Ú¯Ø±Ø¯Ùˆ Ø®ÙˆØ±Ø´ØªÛŒ", unit: "Ú©ÛŒÙ„Ùˆ"},
            {id: 93, name: "Ù…Ø§Ù‡ÛŒ Ù‚Ø²Ù„ Ø¢Ù„Ø§", unit: "Ú©ÛŒÙ„Ùˆ"},
            {id: 94, name: "Ø®ÛŒØ§Ø±Ø´ÙˆØ±", unit: "Ú©ÛŒÙ„Ùˆ"},
            {id: 95, name: "Ø¨Ø±Ù†Ø¬ Ø·Ø§Ø±Ù…", unit: "Ú©ÛŒÙ„Ùˆ"}
        ];

        let employees = [];
        let customers = [];
        let transactions = [];
        let counters = { I: 0, P: 0, E: 0, R: 0, C: 0 };
        let selectedItem = null;
        let selectedItemId = null;
        let selectedEmployeeId = null;
        let selectedCustomerId = null;
        let currentMessage = '';
        
        // Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø­Ø§Ù„Øª Ú†Ù†Ø¯ Ú©Ø§Ù„Ø§ÛŒÛŒ
        let multiSelectedItems = [];
        let currentMultiItem = null;

        for (let i = 1; i <= 12; i++) {
            employees.push({id: i, name: `Ù¾Ø±Ø³Ù†Ù„ ${i}`});
        }

        customers.push({id: 1, name: 'Ø³Ø¹ÛŒØ¯', balance: 0});

        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(item => {
                if (item.textContent.includes(
                    tabId === 'inventoryTab' ? 'Ø§Ù†Ø¨Ø§Ø±' :
                    tabId === 'personnelTab' ? 'Ù¾Ø±Ø³Ù†Ù„' :
                    tabId === 'customersTab' ? 'Ù…Ø´ØªØ±ÛŒØ§Ù†' :
                    tabId === 'expensesTab' ? 'Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§' :
                    tabId === 'reportTab' ? 'Ú¯Ø²Ø§Ø±Ø´' : 'ØªÙ†Ø¸ÛŒÙ…Ø§Øª'
                )) {
                    item.classList.add('active');
                }
            });

            if (tabId === 'settingsTab') {
                refreshItemsList();
                refreshEmployeesList();
                refreshCustomersList();
            }
        }

        function switchInventoryMode(mode) {
            // ØªØºÛŒÛŒØ± ÙˆØ¶Ø¹ÛŒØª ØªØ¨â€ŒÙ‡Ø§ÛŒ Ø³ÙˆØ¦ÛŒÚ†Ø±
            document.querySelectorAll('.tab-switch').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll(`.tab-switch`).forEach(tab => {
                if (tab.textContent.includes(mode === 'single' ? 'ØªÚ© Ú©Ø§Ù„Ø§' : 'Ú†Ù†Ø¯ Ú©Ø§Ù„Ø§')) {
                    tab.classList.add('active');
                }
            });
            
            // ØªØºÛŒÛŒØ± Ù†Ù…Ø§ÛŒØ´ ÙØ±Ù…â€ŒÙ‡Ø§
            document.querySelectorAll('.inventory-tabs').forEach(tab => tab.classList.remove('active'));
            if (mode === 'single') {
                document.getElementById('singleItemTab').classList.add('active');
                // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ù„ÛŒØ³Øª Ú©Ø§Ù„Ø§Ù‡Ø§ÛŒ Ú†Ù†Ø¯ØªØ§ÛŒÛŒ
                document.getElementById('multiSelectedItemsContainer').style.display = 'none';
            } else {
                document.getElementById('multiItemTab').classList.add('active');
                // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù„ÛŒØ³Øª Ú©Ø§Ù„Ø§Ù‡Ø§ÛŒ Ú†Ù†Ø¯ØªØ§ÛŒÛŒ
                loadMultiItemsList();
            }
            
            // Ø±ÛŒØ³Øª Ú©Ø±Ø¯Ù† Ø§Ù†ØªØ®Ø§Ø¨â€ŒÙ‡Ø§
            selectedItem = null;
            selectedItemId = null;
            document.getElementById('itemSearch').value = '';
            document.getElementById('multiItemSearch').value = '';
            document.getElementById('multiItemForm').classList.remove('active');
        }

        function formatNumber(num) {
            return num ? num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") : "0";
        }

        function showAlert(title, message) {
            document.getElementById('alertTitle').textContent = title;
            document.getElementById('alertMessage').textContent = message;
            document.getElementById('alertModal').classList.add('active');
        }

        function closeAlert() {
            document.getElementById('alertModal').classList.remove('active');
        }

        function closeModal() {
            document.getElementById('confirmModal').classList.remove('active');
            currentMessage = '';
        }

        function generateUniqueId(type) {
            const now = new Date();
            const date = `${now.getFullYear().toString().slice(2)}${(now.getMonth()+1).toString().padStart(2,'0')}${now.getDate().toString().padStart(2,'0')}`;
            
            if (!counters[type]) counters[type] = 0;
            counters[type]++;
            
            return `${type}-${date}-${counters[type].toString().padStart(2,'0')}`;
        }

        function loadItemsList() {
            const itemListDiv = document.getElementById('itemList');
            itemListDiv.innerHTML = '';
            
            items.forEach(item => {
                const div = document.createElement('div');
                div.className = 'item-option';
                div.textContent = `${item.name} (${item.unit})`;
                div.onclick = () => {
                    selectedItem = item;
                    selectedItemId = item.id;
                    
                    document.querySelectorAll('#itemList .item-option').forEach(el => {
                        el.style.background = '';
                    });
                    div.style.background = '#D4A574';
                    
                    document.getElementById('itemSearch').value = `${item.name} (${item.unit})`;
                    itemListDiv.style.display = 'none';
                };
                itemListDiv.appendChild(div);
            });
            
            itemListDiv.style.display = 'none';
        }

        function loadMultiItemsList() {
            const itemListDiv = document.getElementById('multiItemList');
            itemListDiv.innerHTML = '';
            
            items.forEach(item => {
                const div = document.createElement('div');
                div.className = 'item-option';
                div.textContent = `${item.name} (${item.unit})`;
                div.onclick = () => {
                    currentMultiItem = item;
                    
                    document.querySelectorAll('#multiItemList .item-option').forEach(el => {
                        el.style.background = '';
                    });
                    div.style.background = '#D4A574';
                    
                    document.getElementById('multiItemSearch').value = `${item.name} (${item.unit})`;
                    document.getElementById('multiItemForm').classList.add('active');
                    itemListDiv.style.display = 'none';
                    
                    // Ø±ÛŒØ³Øª Ú©Ø±Ø¯Ù† ÙÛŒÙ„Ø¯Ù‡Ø§
                    document.getElementById('multiQuantity').value = '';
                    document.getElementById('multiPrice').value = '';
                    
                    // ÙØ¹Ø§Ù„/ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† ÙÛŒÙ„Ø¯ Ù‚ÛŒÙ…Øª Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†ÙˆØ¹ Ø¹Ù…Ù„ÛŒØ§Øª
                    const type = document.getElementById('multiInventoryType').value;
                    const priceInput = document.getElementById('multiPrice');
                    if (type === 'out') {
                        priceInput.disabled = true;
                        priceInput.placeholder = 'Ø¨Ø±Ø§ÛŒ Ø®Ø±ÙˆØ¬ Ù†ÛŒØ§Ø² Ù†ÛŒØ³Øª';
                    } else {
                        priceInput.disabled = false;
                        priceInput.placeholder = 'Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯';
                    }
                };
                itemListDiv.appendChild(div);
            });
            
            itemListDiv.style.display = 'none';
        }

        function addToMultiItemsList() {
            if (!currentMultiItem) {
                showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ ÛŒÚ© Ú©Ø§Ù„Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            const quantity = document.getElementById('multiQuantity').value;
            const price = document.getElementById('multiPrice').value;
            const type = document.getElementById('multiInventoryType').value;
            
            if (!quantity || quantity <= 0) {
                showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ù…Ù‚Ø¯Ø§Ø± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            if (type === 'in' && (!price || price <= 0)) {
                showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¨Ù‡ Ù„ÛŒØ³Øª
            const newItem = {
                id: currentMultiItem.id,
                name: currentMultiItem.name,
                unit: currentMultiItem.unit,
                quantity: quantity,
                price: type === 'in' ? price : 0,
                total: type === 'in' ? quantity * price : 0
            };
            
            multiSelectedItems.push(newItem);
            
            // Ù†Ù…Ø§ÛŒØ´ Ù„ÛŒØ³Øª
            updateMultiItemsDisplay();
            
            // Ø±ÛŒØ³Øª Ú©Ø±Ø¯Ù† ÙØ±Ù…
            document.getElementById('multiQuantity').value = '';
            document.getElementById('multiPrice').value = '';
            document.getElementById('multiItemSearch').value = '';
            document.getElementById('multiItemForm').classList.remove('active');
            currentMultiItem = null;
            
            // Ù†Ù…Ø§ÛŒØ´ Ù„ÛŒØ³Øª Ú©Ø§Ù„Ø§Ù‡Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡
            document.getElementById('multiSelectedItemsContainer').style.display = 'block';
        }

        function updateMultiItemsDisplay() {
            const container = document.getElementById('selectedItemsList');
            container.innerHTML = '';
            
            let totalAmount = 0;
            
            multiSelectedItems.forEach((item, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'selected-item';
                
                const total = item.quantity * (item.price || 0);
                totalAmount += total;
                
                itemDiv.innerHTML = `
                    <div class="item-details">
                        <div class="item-name">${item.name}</div>
                        <div class="item-quantity">Ù…Ù‚Ø¯Ø§Ø±: ${item.quantity} ${item.unit}</div>
                        ${item.price > 0 ? `<div class="item-price">Ù‚ÛŒÙ…Øª: ${formatNumber(item.price)} Ø±ÛŒØ§Ù„ (Ø¬Ù…Ø¹: ${formatNumber(total)} Ø±ÛŒØ§Ù„)</div>` : ''}
                    </div>
                    <div class="remove-item" onclick="removeMultiItem(${index})">Ã—</div>
                `;
                
                container.appendChild(itemDiv);
            });
            
            // Ø¨Ù‡ Ø±ÙˆØ² Ø±Ø³Ø§Ù†ÛŒ ØªØ¹Ø¯Ø§Ø¯
            document.getElementById('selectedItemsCount').textContent = multiSelectedItems.length;
            
            // Ù†Ù…Ø§ÛŒØ´ Ø¬Ù…Ø¹ Ú©Ù„ Ø§Ú¯Ø± Ù†ÙˆØ¹ Ø¹Ù…Ù„ÛŒØ§Øª "ÙˆØ±ÙˆØ¯" Ø¨Ø§Ø´Ø¯
            const type = document.getElementById('multiInventoryType').value;
            if (type === 'in' && totalAmount > 0) {
                const totalDiv = document.createElement('div');
                totalDiv.style.marginTop = '10px';
                totalDiv.style.padding = '10px';
                totalDiv.style.background = '#E8F5E9';
                totalDiv.style.borderRadius = '8px';
                totalDiv.style.textAlign = 'center';
                totalDiv.style.fontWeight = 'bold';
                totalDiv.innerHTML = `ğŸ’° Ø¬Ù…Ø¹ Ú©Ù„: ${formatNumber(totalAmount)} Ø±ÛŒØ§Ù„`;
                container.appendChild(totalDiv);
            }
        }

        function removeMultiItem(index) {
            multiSelectedItems.splice(index, 1);
            updateMultiItemsDisplay();
            
            if (multiSelectedItems.length === 0) {
                document.getElementById('multiSelectedItemsContainer').style.display = 'none';
            }
        }

        function clearAllSelectedItems() {
            if (multiSelectedItems.length > 0) {
                if (confirm('Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ù‡Ù…Ù‡ Ú©Ø§Ù„Ø§Ù‡Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ')) {
                    multiSelectedItems = [];
                    document.getElementById('multiSelectedItemsContainer').style.display = 'none';
                    document.getElementById('multiItemSearch').value = '';
                    document.getElementById('multiItemForm').classList.remove('active');
                    currentMultiItem = null;
                }
            }
        }

        function loadEmployeesSelect() {
            const select = document.getElementById('employeeSelect');
            select.innerHTML = '';
            employees.forEach(emp => {
                const option = document.createElement('option');
                option.value = emp.id;
                option.textContent = emp.name;
                select.appendChild(option);
            });
        }

        function loadCustomersSelect() {
            const select = document.getElementById('customerSelect');
            select.innerHTML = '';
            customers.forEach(cust => {
                const option = document.createElement('option');
                option.value = cust.id;
                option.textContent = `${cust.name} (Ù…Ø§Ù†Ø¯Ù‡: ${formatNumber(cust.balance)} Ø±ÛŒØ§Ù„)`;
                select.appendChild(option);
            });
        }

        function loadCustomerItemsSelect() {
            const select = document.getElementById('customerItemSelect');
            select.innerHTML = '<option value="">-- Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø§Ù„Ø§ --</option>';
            items.forEach(item => {
                const option = document.createElement('option');
                option.value = item.id;
                option.textContent = `${item.name} (${item.unit})`;
                select.appendChild(option);
            });
        }

        function updateCustomerBalance() {
            const customerId = parseInt(document.getElementById('customerSelect').value);
            if (!customerId) return;
            
            const customer = customers.find(c => c.id === customerId);
            if (customer) {
                document.getElementById('customerBalance').textContent = formatNumber(customer.balance);
                document.getElementById('customerBalanceDisplay').style.display = 'block';
            }
        }

        function createSingleInventoryCard() {
            const type = document.getElementById('inventoryType').value;
            const quantity = document.getElementById('quantity').value;
            const price = document.getElementById('price').value;
            const desc = document.getElementById('inventoryDesc').value;
            
            if (!selectedItem) {
                showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ ÛŒÚ© Ú©Ø§Ù„Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            if (!quantity || quantity <= 0) {
                showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ù…Ù‚Ø¯Ø§Ø± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            if (type === 'in' && (!price || price <= 0)) {
                showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            const uniqueId = generateUniqueId('I');
            const date = new Date().toLocaleDateString('fa-IR');
            const time = new Date().toLocaleTimeString('fa-IR', {hour: '2-digit', minute:'2-digit'});
            
            let message = `ğŸ¢ Ø±Ø³ØªÙˆØ±Ø§Ù† Ø´Ù‚Ø§ÛŒÙ‚\n`;
            message += `ğŸ“¦ Ú©Ø§Ø±Øª Ø§Ù†Ø¨Ø§Ø± | ${type === 'in' ? 'âœ… ÙˆØ±ÙˆØ¯' : 'ğŸ”» Ø®Ø±ÙˆØ¬'}\n`;
            message += `ğŸ†” Ú©Ø¯: ${uniqueId}\n`;
            message += `â”€`.repeat(30) + `\n`;
            message += `ğŸ“… ØªØ§Ø±ÛŒØ®: ${date} - Ø³Ø§Ø¹Øª ${time}\n`;
            message += `ğŸ“Œ Ú©Ø§Ù„Ø§: ${selectedItem.name}\n`;
            message += `ğŸ“ Ù…Ù‚Ø¯Ø§Ø±: ${quantity} ${selectedItem.unit}\n`;
            
            if (type === 'in' && price) {
                const total = quantity * price;
                message += `ğŸ’° Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯: ${formatNumber(price)} Ø±ÛŒØ§Ù„\n`;
                message += `ğŸ’µ Ø¬Ù…Ø¹: ${formatNumber(total)} Ø±ÛŒØ§Ù„\n`;
            }
            
            if (desc) {
                message += `ğŸ“ ØªÙˆØ¶ÛŒØ­: ${desc}\n`;
            }
            
            message += `â”€`.repeat(30) + `\n`;
            message += `âœ… Ø¬Ù‡Øª Ø«Ø¨Øª Ø¯Ø± Ø³ÛŒØ³ØªÙ… Ø­Ø³Ø§Ø¨Ø¯Ø§Ø±ÛŒ`;
            
            document.getElementById('inventoryPreview').textContent = message;
            document.getElementById('inventoryPreview').style.display = 'block';
            
            transactions.push({
                id: uniqueId,
                type: 'inventory',
                subtype: type,
                item: selectedItem,
                quantity: quantity,
                price: price,
                description: desc,
                timestamp: new Date(),
                message: message
            });
            
            document.getElementById('confirmMessage').textContent = message;
            document.getElementById('confirmModal').classList.add('active');
            currentMessage = message;
        }

        function createMultiInventoryCard() {
            const type = document.getElementById('multiInventoryType').value;
            const desc = document.getElementById('multiInventoryDesc').value;
            
            if (multiSelectedItems.length === 0) {
                showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ø­Ø¯Ø§Ù‚Ù„ ÛŒÚ© Ú©Ø§Ù„Ø§ Ø¨Ù‡ Ù„ÛŒØ³Øª Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            const uniqueId = generateUniqueId('I');
            const date = new Date().toLocaleDateString('fa-IR');
            const time = new Date().toLocaleTimeString('fa-IR', {hour: '2-digit', minute:'2-digit'});
            
            let message = `ğŸ¢ Ø±Ø³ØªÙˆØ±Ø§Ù† Ø´Ù‚Ø§ÛŒÙ‚\n`;
            message += `ğŸ“¦ Ú©Ø§Ø±Øª Ø§Ù†Ø¨Ø§Ø± Ú†Ù†Ø¯ Ú©Ø§Ù„Ø§ÛŒÛŒ | ${type === 'in' ? 'âœ… ÙˆØ±ÙˆØ¯' : 'ğŸ”» Ø®Ø±ÙˆØ¬'}\n`;
            message += `ğŸ†” Ú©Ø¯: ${uniqueId}\n`;
            message += `â”€`.repeat(30) + `\n`;
            message += `ğŸ“… ØªØ§Ø±ÛŒØ®: ${date} - Ø³Ø§Ø¹Øª ${time}\n`;
            message += `ğŸ“‹ ØªØ¹Ø¯Ø§Ø¯ Ú©Ø§Ù„Ø§Ù‡Ø§: ${multiSelectedItems.length} Ù…ÙˆØ±Ø¯\n`;
            message += `â”€`.repeat(30) + `\n`;
            
            let totalAmount = 0;
            
            multiSelectedItems.forEach((item, index) => {
                message += `${index + 1}. ${item.name}\n`;
                message += `   ğŸ“ Ù…Ù‚Ø¯Ø§Ø±: ${item.quantity} ${item.unit}\n`;
                
                if (type === 'in' && item.price > 0) {
                    const itemTotal = item.quantity * item.price;
                    totalAmount += itemTotal;
                    message += `   ğŸ’° Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯: ${formatNumber(item.price)} Ø±ÛŒØ§Ù„\n`;
                    message += `   ğŸ’µ Ø¬Ù…Ø¹ Ø§ÛŒÙ† Ú©Ø§Ù„Ø§: ${formatNumber(itemTotal)} Ø±ÛŒØ§Ù„\n`;
                }
                
                if (index < multiSelectedItems.length - 1) {
                    message += `   â”€\n`;
                }
            });
            
            if (type === 'in' && totalAmount > 0) {
                message += `â”€`.repeat(30) + `\n`;
                message += `ğŸ’° Ø¬Ù…Ø¹ Ú©Ù„ Ø®Ø±ÛŒØ¯: ${formatNumber(totalAmount)} Ø±ÛŒØ§Ù„\n`;
            }
            
            if (desc) {
                message += `ğŸ“ ØªÙˆØ¶ÛŒØ­ Ú©Ù„ÛŒ: ${desc}\n`;
            }
            
            message += `â”€`.repeat(30) + `\n`;
            message += `âœ… Ø¬Ù‡Øª Ø«Ø¨Øª Ø¯Ø± Ø³ÛŒØ³ØªÙ… Ø­Ø³Ø§Ø¨Ø¯Ø§Ø±ÛŒ`;
            
            document.getElementById('inventoryPreview').textContent = message;
            document.getElementById('inventoryPreview').style.display = 'block';
            
            // Ø°Ø®ÛŒØ±Ù‡ ØªØ±Ø§Ú©Ù†Ø´
            transactions.push({
                id: uniqueId,
                type: 'inventory',
                subtype: type,
                items: [...multiSelectedItems],
                totalAmount: totalAmount,
                description: desc,
                timestamp: new Date(),
                message: message,
                isMulti: true
            });
            
            document.getElementById('confirmMessage').textContent = message;
            document.getElementById('confirmModal').classList.add('active');
            currentMessage = message;
            
            // Ø±ÛŒØ³Øª Ú©Ø±Ø¯Ù† ÙØ±Ù…
            multiSelectedItems = [];
            document.getElementById('multiSelectedItemsContainer').style.display = 'none';
            document.getElementById('multiItemSearch').value = '';
            document.getElementById('multiInventoryDesc').value = '';
            document.getElementById('multiItemForm').classList.remove('active');
            currentMultiItem = null;
        }

        function createPersonnelCard() {
            const employeeId = parseInt(document.getElementById('employeeSelect').value);
            const paymentType = document.getElementById('paymentType').value;
            const amount = document.getElementById('amount').value;
            const period = document.getElementById('period').value;
            const desc = document.getElementById('personnelDesc').value;
            
            if (!employeeId) {
                showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ù¾Ø±Ø³Ù†Ù„ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            if (!amount || amount <= 0) {
                showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ù…Ø¨Ù„Øº Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            const employee = employees.find(e => e.id === employeeId);
            if (!employee) {
                showAlert('Ø®Ø·Ø§', 'Ù¾Ø±Ø³Ù†Ù„ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª');
                return;
            }
            
            const uniqueId = generateUniqueId('P');
            const date = new Date().toLocaleDateString('fa-IR');
            const time = new Date().toLocaleTimeString('fa-IR', {hour: '2-digit', minute:'2-digit'});
            
            const paymentTypes = {
                salary: 'ğŸ’° Ø­Ù‚ÙˆÙ‚',
                advance: 'ğŸ’¸ Ù…Ø³Ø§Ø¹Ø¯Ù‡',
                food: 'ğŸ² Ø­Ù‚ ØºØ°Ø§',
                bonus: 'ğŸ Ù¾Ø§Ø¯Ø§Ø´',
                other: 'ğŸ“¤ Ø³Ø§ÛŒØ±'
            };
            
            let message = `ğŸ¢ Ø±Ø³ØªÙˆØ±Ø§Ù† Ø´Ù‚Ø§ÛŒÙ‚\n`;
            message += `ğŸ‘¥ Ú©Ø§Ø±Øª Ù¾Ø±Ø¯Ø§Ø®Øª Ù¾Ø±Ø³Ù†Ù„\n`;
            message += `ğŸ†” Ú©Ø¯: ${uniqueId}\n`;
            message += `â”€`.repeat(30) + `\n`;
            message += `ğŸ“… ØªØ§Ø±ÛŒØ®: ${date} - Ø³Ø§Ø¹Øª ${time}\n`;
            message += `ğŸ‘¤ Ù¾Ø±Ø³Ù†Ù„: ${employee.name}\n`;
            message += `${paymentTypes[paymentType]}\n`;
            message += `ğŸ’µ Ù…Ø¨Ù„Øº: ${formatNumber(amount)} Ø±ÛŒØ§Ù„\n`;
            
            if (period && paymentType === 'salary') {
                message += `ğŸ—“ï¸ Ø¯ÙˆØ±Ù‡: ${period}\n`;
            }
            
            if (desc) {
                message += `ğŸ“ ØªÙˆØ¶ÛŒØ­: ${desc}\n`;
            }
            
            message += `â”€`.repeat(30) + `\n`;
            message += `âœ… Ø¬Ù‡Øª Ø«Ø¨Øª Ø¯Ø± Ø³ÛŒØ³ØªÙ… Ø­Ø³Ø§Ø¨Ø¯Ø§Ø±ÛŒ`;
            
            document.getElementById('personnelPreview').textContent = message;
            document.getElementById('personnelPreview').style.display = 'block';
            
            transactions.push({
                id: uniqueId,
                type: 'personnel',
                employee: employee,
                paymentType: paymentType,
                amount: amount,
                period: period,
                description: desc,
                timestamp: new Date(),
                message: message
            });
            
            document.getElementById('confirmMessage').textContent = message;
            document.getElementById('confirmModal').classList.add('active');
            currentMessage = message;
        }

        function createCustomerTransaction() {
            const customerId = parseInt(document.getElementById('customerSelect').value);
            const transactionType = document.getElementById('customerTransactionType').value;
            const itemId = parseInt(document.getElementById('customerItemSelect').value);
            const quantity = parseFloat(document.getElementById('customerQuantity').value);
            const price = parseInt(document.getElementById('customerPrice').value);
            const cashAmount = parseInt(document.getElementById('customerCashAmount').value);
            const desc = document.getElementById('customerDesc').value;
            
            if (!customerId) {
                showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ù…Ø´ØªØ±ÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            const customer = customers.find(c => c.id === customerId);
            if (!customer) {
                showAlert('Ø®Ø·Ø§', 'Ù…Ø´ØªØ±ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª');
                return;
            }
            
            const uniqueId = generateUniqueId('C');
            const date = new Date().toLocaleDateString('fa-IR');
            const time = new Date().toLocaleTimeString('fa-IR', {hour: '2-digit', minute:'2-digit'});
            
            let message = `ğŸ¢ Ø±Ø³ØªÙˆØ±Ø§Ù† Ø´Ù‚Ø§ÛŒÙ‚\n`;
            message += `ğŸ¤ ØªØ±Ø§Ú©Ù†Ø´ Ù…Ø´ØªØ±ÛŒ\n`;
            message += `ğŸ†” Ú©Ø¯: ${uniqueId}\n`;
            message += `â”€`.repeat(30) + `\n`;
            message += `ğŸ“… ØªØ§Ø±ÛŒØ®: ${date} - Ø³Ø§Ø¹Øª ${time}\n`;
            message += `ğŸ‘¤ Ù…Ø´ØªØ±ÛŒ: ${customer.name}\n`;
            
            let amount = 0;
            
            if (transactionType === 'buy') {
                if (!itemId) {
                    showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ú©Ø§Ù„Ø§ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
                    return;
                }
                if (!quantity || quantity <= 0) {
                    showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ù…Ù‚Ø¯Ø§Ø± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                    return;
                }
                if (!price || price <= 0) {
                    showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                    return;
                }
                
                const item = items.find(i => i.id === itemId);
                amount = quantity * price;
                customer.balance += amount;
                
                message += `ğŸ›’ Ø®Ø±ÛŒØ¯ Ø§Ø² Ù…Ø´ØªØ±ÛŒ\n`;
                message += `ğŸ“¦ Ú©Ø§Ù„Ø§: ${item.name}\n`;
                message += `ğŸ“ Ù…Ù‚Ø¯Ø§Ø±: ${quantity} ${item.unit}\n`;
                message += `ğŸ’° Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯: ${formatNumber(price)} Ø±ÛŒØ§Ù„\n`;
                message += `ğŸ’µ Ø¬Ù…Ø¹: ${formatNumber(amount)} Ø±ÛŒØ§Ù„\n`;
                
            } else if (transactionType === 'sell') {
                if (!itemId) {
                    showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ú©Ø§Ù„Ø§ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
                    return;
                }
                if (!quantity || quantity <= 0) {
                    showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ù…Ù‚Ø¯Ø§Ø± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                    return;
                }
                if (!price || price <= 0) {
                    showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                    return;
                }
                
                const item = items.find(i => i.id === itemId);
                amount = quantity * price;
                customer.balance -= amount;
                
                message += `ğŸ’° ÙØ±ÙˆØ´ Ø¨Ù‡ Ù…Ø´ØªØ±ÛŒ\n`;
                message += `ğŸ“¦ Ú©Ø§Ù„Ø§: ${item.name}\n`;
                message += `ğŸ“ Ù…Ù‚Ø¯Ø§Ø±: ${quantity} ${item.unit}\n`;
                message += `ğŸ’° Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯: ${formatNumber(price)} Ø±ÛŒØ§Ù„\n`;
                message += `ğŸ’µ Ø¬Ù…Ø¹: ${formatNumber(amount)} Ø±ÛŒØ§Ù„\n`;
                
            } else if (transactionType === 'payment') {
                if (!cashAmount || cashAmount <= 0) {
                    showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ù…Ø¨Ù„Øº Ù¾Ø±Ø¯Ø§Ø®ØªÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                    return;
                }
                
                amount = cashAmount;
                customer.balance -= amount;
                
                message += `ğŸ’³ Ù¾Ø±Ø¯Ø§Ø®Øª Ø¨Ù‡ Ù…Ø´ØªØ±ÛŒ\n`;
                message += `ğŸ’µ Ù…Ø¨Ù„Øº: ${formatNumber(amount)} Ø±ÛŒØ§Ù„\n`;
                
            } else if (transactionType === 'receive') {
                if (!cashAmount || cashAmount <= 0) {
                    showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ù…Ø¨Ù„Øº Ø¯Ø±ÛŒØ§ÙØªÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                    return;
                }
                
                amount = cashAmount;
                customer.balance += amount;
                
                message += `ğŸ’µ Ø¯Ø±ÛŒØ§ÙØª Ø§Ø² Ù…Ø´ØªØ±ÛŒ\n`;
                message += `ğŸ’µ Ù…Ø¨Ù„Øº: ${formatNumber(amount)} Ø±ÛŒØ§Ù„\n`;
            }
            
            message += `ğŸ“ ØªÙˆØ¶ÛŒØ­: ${desc || 'Ø¨Ø¯ÙˆÙ† ØªÙˆØ¶ÛŒØ­'}\n`;
            message += `ğŸ¦ Ù…Ø§Ù†Ø¯Ù‡ Ø¬Ø¯ÛŒØ¯: ${formatNumber(customer.balance)} Ø±ÛŒØ§Ù„\n`;
            message += `â”€`.repeat(30) + `\n`;
            message += `âœ… Ø¬Ù‡Øª Ø«Ø¨Øª Ø¯Ø± Ø³ÛŒØ³ØªÙ… Ø­Ø³Ø§Ø¨Ø¯Ø§Ø±ÛŒ`;
            
            document.getElementById('customerPreview').textContent = message;
            document.getElementById('customerPreview').style.display = 'block';
            
            transactions.push({
                id: uniqueId,
                type: 'customer',
                customer: customer,
                transactionType: transactionType,
                amount: amount,
                description: desc,
                timestamp: new Date(),
                message: message
            });
            
            document.getElementById('confirmMessage').textContent = message;
            document.getElementById('confirmModal').classList.add('active');
            currentMessage = message;
            
            updateCustomerBalance();
            loadCustomersSelect();
        }

        function createExpenseCard() {
            const title = document.getElementById('expenseTitle').value;
            const amount = document.getElementById('expenseAmount').value;
            const desc = document.getElementById('expenseDesc').value;
            
            if (!title) {
                showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ø¹Ù†ÙˆØ§Ù† Ù‡Ø²ÛŒÙ†Ù‡ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            if (!amount || amount <= 0) {
                showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ù…Ø¨Ù„Øº Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            const uniqueId = generateUniqueId('E');
            const date = new Date().toLocaleDateString('fa-IR');
            const time = new Date().toLocaleTimeString('fa-IR', {hour: '2-digit', minute:'2-digit'});
            
            let message = `ğŸ¢ Ø±Ø³ØªÙˆØ±Ø§Ù† Ø´Ù‚Ø§ÛŒÙ‚\n`;
            message += `ğŸ’¸ Ú©Ø§Ø±Øª Ù‡Ø²ÛŒÙ†Ù‡ Ù…ØªÙØ±Ù‚Ù‡\n`;
            message += `ğŸ†” Ú©Ø¯: ${uniqueId}\n`;
            message += `â”€`.repeat(30) + `\n`;
            message += `ğŸ“… ØªØ§Ø±ÛŒØ®: ${date} - Ø³Ø§Ø¹Øª ${time}\n`;
            message += `ğŸ“Œ Ø¹Ù†ÙˆØ§Ù†: ${title}\n`;
            message += `ğŸ’µ Ù…Ø¨Ù„Øº: ${formatNumber(amount)} Ø±ÛŒØ§Ù„\n`;
            
            if (desc) {
                message += `ğŸ“ ØªÙˆØ¶ÛŒØ­: ${desc}\n`;
            }
            
            message += `â”€`.repeat(30) + `\n`;
            message += `âœ… Ø¬Ù‡Øª Ø«Ø¨Øª Ø¯Ø± Ø³ÛŒØ³ØªÙ… Ø­Ø³Ø§Ø¨Ø¯Ø§Ø±ÛŒ`;
            
            document.getElementById('expensePreview').textContent = message;
            document.getElementById('expensePreview').style.display = 'block';
            
            transactions.push({
                id: uniqueId,
                type: 'expense',
                title: title,
                amount: amount,
                description: desc,
                timestamp: new Date(),
                message: message
            });
            
            document.getElementById('confirmMessage').textContent = message;
            document.getElementById('confirmModal').classList.add('active');
            currentMessage = message;
        }

        function createDailyReport() {
            const today = new Date().toLocaleDateString('fa-IR');
            const todayStart = new Date();
            todayStart.setHours(0,0,0,0);
            
            const todayTransactions = transactions.filter(t => t.timestamp >= todayStart);
            
            if (todayTransactions.length === 0) {
                showAlert('Ø§Ø·Ù„Ø§Ø¹', 'Ù‡ÛŒÚ† ØªØ±Ø§Ú©Ù†Ø´ÛŒ Ø¨Ø±Ø§ÛŒ Ø§Ù…Ø±ÙˆØ² Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª');
                return;
            }
            
            const uniqueId = generateUniqueId('R');
            const time = new Date().toLocaleTimeString('fa-IR', {hour: '2-digit', minute:'2-digit'});
            
            let message = `ğŸ¢ Ø±Ø³ØªÙˆØ±Ø§Ù† Ø´Ù‚Ø§ÛŒÙ‚\n`;
            message += `ğŸ“Š Ú¯Ø²Ø§Ø±Ø´ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø±ÙˆØ²Ø§Ù†Ù‡\n`;
            message += `ğŸ†” Ú©Ø¯ Ú¯Ø²Ø§Ø±Ø´: ${uniqueId}\n`;
            message += `ğŸ“… ØªØ§Ø±ÛŒØ®: ${today} - Ø³Ø§Ø¹Øª ${time}\n`;
            message += `â•`.repeat(30) + `\n`;
            
            const inventoryToday = todayTransactions.filter(t => t.type === 'inventory');
            if (inventoryToday.length > 0) {
                message += `ğŸ“¦ **Ø§Ù…ÙˆØ± Ø§Ù†Ø¨Ø§Ø± (${inventoryToday.length} Ù…ÙˆØ±Ø¯)**\n`;
                inventoryToday.forEach(t => {
                    if (t.isMulti) {
                        const icon = t.subtype === 'in' ? 'âœ…' : 'ğŸ”»';
                        message += `â€¢ ${icon} Ú©Ø§Ø±Øª Ú†Ù†Ø¯ Ú©Ø§Ù„Ø§ÛŒÛŒ (${t.items.length} Ú©Ø§Ù„Ø§)\n`;
                    } else {
                        const icon = t.subtype === 'in' ? 'âœ…' : 'ğŸ”»';
                        message += `â€¢ ${icon} ${t.item.name}: ${t.quantity} ${t.item.unit}\n`;
                    }
                });
                message += `\n`;
            }
            
            const personnelToday = todayTransactions.filter(t => t.type === 'personnel');
            if (personnelToday.length > 0) {
                message += `ğŸ‘¥ **Ø§Ù…ÙˆØ± Ù¾Ø±Ø³Ù†Ù„ (${personnelToday.length} Ù…ÙˆØ±Ø¯)**\n`;
                personnelToday.forEach(t => {
                    message += `â€¢ ${t.employee.name}: ${formatNumber(t.amount)} Ø±ÛŒØ§Ù„\n`;
                });
                message += `\n`;
            }
            
            const customersToday = todayTransactions.filter(t => t.type === 'customer');
            if (customersToday.length > 0) {
                message += `ğŸ¤ **ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ø´ØªØ±ÛŒØ§Ù† (${customersToday.length} Ù…ÙˆØ±Ø¯)**\n`;
                customersToday.forEach(t => {
                    message += `â€¢ ${t.customer.name}: ${formatNumber(t.amount)} Ø±ÛŒØ§Ù„\n`;
                });
                message += `\n`;
            }
            
            const expensesToday = todayTransactions.filter(t => t.type === 'expense');
            if (expensesToday.length > 0) {
                message += `ğŸ’¸ **Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ù…ØªÙØ±Ù‚Ù‡ (${expensesToday.length} Ù…ÙˆØ±Ø¯)**\n`;
                expensesToday.forEach(t => {
                    message += `â€¢ ${t.title}: ${formatNumber(t.amount)} Ø±ÛŒØ§Ù„\n`;
                });
                message += `\n`;
            }
            
            const totalPersonnel = personnelToday.reduce((sum, t) => sum + parseFloat(t.amount), 0);
            const totalExpenses = expensesToday.reduce((sum, t) => sum + parseFloat(t.amount), 0);
            const totalInventory = inventoryToday.reduce((sum, t) => {
                if (t.isMulti) {
                    return sum + (parseFloat(t.totalAmount) || 0);
                } else {
                    return sum + (parseFloat(t.quantity) * parseFloat(t.price || 0));
                }
            }, 0);
            const totalCustomers = customersToday.reduce((sum, t) => sum + parseFloat(t.amount), 0);
            
            message += `ğŸ’° **Ø¬Ù…Ø¹â€ŒØ¨Ù†Ø¯ÛŒ Ù…Ø§Ù„ÛŒ Ø§Ù…Ø±ÙˆØ²**\n`;
            message += `â€¢ Ú©Ù„ Ù¾Ø±Ø¯Ø§Ø®ØªÛŒâ€ŒÙ‡Ø§ÛŒ Ù¾Ø±Ø³Ù†Ù„: ${formatNumber(totalPersonnel)} Ø±ÛŒØ§Ù„\n`;
            message += `â€¢ Ú©Ù„ Ø®Ø±ÛŒØ¯ Ø§Ù†Ø¨Ø§Ø±: ${formatNumber(totalInventory)} Ø±ÛŒØ§Ù„\n`;
            message += `â€¢ Ú©Ù„ Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ù…ØªÙØ±Ù‚Ù‡: ${formatNumber(totalExpenses)} Ø±ÛŒØ§Ù„\n`;
            message += `â€¢ Ú©Ù„ ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ø´ØªØ±ÛŒØ§Ù†: ${formatNumber(totalCustomers)} Ø±ÛŒØ§Ù„\n`;
            message += `â€¢ **Ù…Ø¬Ù…ÙˆØ¹ Ú©Ù„ ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§:** ${formatNumber(totalPersonnel + totalInventory + totalExpenses + totalCustomers)} Ø±ÛŒØ§Ù„\n`;
            message += `â•`.repeat(30) + `\n`;
            message += `âœ… Ú¯Ø²Ø§Ø±Ø´ Ø®ÙˆØ¯Ú©Ø§Ø± - Ø¬Ù‡Øª Ø¨Ø±Ø±Ø³ÛŒ Ùˆ Ø«Ø¨Øª`;
            
            document.getElementById('reportPreview').textContent = message;
            document.getElementById('reportPreview').style.display = 'block';
            
            document.getElementById('confirmMessage').textContent = message;
            document.getElementById('confirmModal').classList.add('active');
            currentMessage = message;
        }

        function sendConfirmedMessage() {
            if (currentMessage) {
                const encodedMessage = encodeURIComponent(currentMessage);
                const whatsappUrl = `https://wa.me/?text=${encodedMessage}`;
                const telegramUrl = `https://t.me/share/url?url=&text=${encodedMessage}`;
                
                if (navigator.share) {
                    navigator.share({
                        title: 'Ú©Ø§Ø±Øª Ø±Ø³ØªÙˆØ±Ø§Ù† Ø´Ù‚Ø§ÛŒÙ‚',
                        text: currentMessage
                    }).then(() => {
                        console.log('Ù¾ÛŒØ§Ù… Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ù‡ Ø§Ø´ØªØ±Ø§Ú© Ú¯Ø°Ø§Ø´ØªÙ‡ Ø´Ø¯');
                    }).catch(err => {
                        console.log('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ:', err);
                        window.open(telegramUrl, '_blank');
                    });
                } else {
                    const choice = confirm("Ù¾ÛŒØ§Ù… Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª. Ø¨Ø±Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù… OK Ø±Ø§ Ø¨Ø²Ù†ÛŒØ¯ØŒ Ø¨Ø±Ø§ÛŒ ÙˆØ§ØªØ³â€ŒØ§Ù¾ Cancel Ø±Ø§ Ø¨Ø²Ù†ÛŒØ¯.");
                    if (choice) {
                        window.open(telegramUrl, '_blank');
                    } else {
                        window.open(whatsappUrl, '_blank');
                    }
                }
                
                document.querySelectorAll('input, textarea, select').forEach(el => {
                    if (el.type !== 'button') {
                        el.value = '';
                    }
                });
                document.querySelectorAll('.message-preview').forEach(el => {
                    el.style.display = 'none';
                });
                selectedItem = null;
                selectedItemId = null;
                
                document.getElementById('customerBalanceDisplay').style.display = 'none';
            }
            
            closeModal();
        }

        function refreshItemsList() {
            const listDiv = document.getElementById('itemsList');
            listDiv.innerHTML = '';
            items.forEach(item => {
                const div = document.createElement('div');
                div.className = 'item-option';
                div.textContent = `${item.name} (${item.unit})`;
                div.onclick = () => {
                    document.getElementById('newItemName').value = item.name;
                    document.getElementById('newItemUnit').value = item.unit;
                    selectedItemId = item.id;
                };
                listDiv.appendChild(div);
            });
        }

        function refreshEmployeesList() {
            const listDiv = document.getElementById('employeesList');
            listDiv.innerHTML = '';
            employees.forEach(emp => {
                const div = document.createElement('div');
                div.className = 'item-option';
                div.textContent = emp.name;
                div.onclick = () => {
                    document.getElementById('newEmployeeName').value = emp.name;
                    selectedEmployeeId = emp.id;
                };
                listDiv.appendChild(div);
            });
        }

        function refreshCustomersList() {
            const listDiv = document.getElementById('customersList');
            listDiv.innerHTML = '';
            customers.forEach(cust => {
                const div = document.createElement('div');
                div.className = 'item-option';
                div.textContent = `${cust.name} (Ù…Ø§Ù†Ø¯Ù‡: ${formatNumber(cust.balance)} Ø±ÛŒØ§Ù„)`;
                div.onclick = () => {
                    document.getElementById('newCustomerName').value = cust.name;
                    selectedCustomerId = cust.id;
                };
                listDiv.appendChild(div);
            });
        }

        function addItem() {
            const name = document.getElementById('newItemName').value.trim();
            const unit = document.getElementById('newItemUnit').value.trim();
            
            if (!name) {
                showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ú©Ø§Ù„Ø§ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            if (!unit) {
                showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ ÙˆØ§Ø­Ø¯ Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            const newId = Math.max(...items.map(i => i.id)) + 1;
            items.push({id: newId, name: name, unit: unit});
            
            document.getElementById('newItemName').value = '';
            document.getElementById('newItemUnit').value = '';
            selectedItemId = null;
            
            refreshItemsList();
            loadItemsList();
            loadMultiItemsList();
            loadCustomerItemsSelect();
            showAlert('Ù…ÙˆÙÙ‚ÛŒØª', 'Ú©Ø§Ù„Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯');
        }

        function editItem() {
            if (!selectedItemId) {
                showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ ÛŒÚ© Ú©Ø§Ù„Ø§ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            const name = document.getElementById('newItemName').value.trim();
            const unit = document.getElementById('newItemUnit').value.trim();
            
            if (!name) {
                showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ú©Ø§Ù„Ø§ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            if (!unit) {
                showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ ÙˆØ§Ø­Ø¯ Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            const itemIndex = items.findIndex(i => i.id === selectedItemId);
            if (itemIndex !== -1) {
                items[itemIndex].name = name;
                items[itemIndex].unit = unit;
            }
            
            document.getElementById('newItemName').value = '';
            document.getElementById('newItemUnit').value = '';
            selectedItemId = null;
            
            refreshItemsList();
            loadItemsList();
            loadMultiItemsList();
            loadCustomerItemsSelect();
            showAlert('Ù…ÙˆÙÙ‚ÛŒØª', 'Ú©Ø§Ù„Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ÙˆÛŒØ±Ø§ÛŒØ´ Ø´Ø¯');
        }

        function deleteItem() {
            if (!selectedItemId) {
                showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ ÛŒÚ© Ú©Ø§Ù„Ø§ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            if (!confirm('Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ú©Ø§Ù„Ø§ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ')) {
                return;
            }
            
            const itemIndex = items.findIndex(i => i.id === selectedItemId);
            if (itemIndex !== -1) {
                items.splice(itemIndex, 1);
            }
            
            document.getElementById('newItemName').value = '';
            document.getElementById('newItemUnit').value = '';
            selectedItemId = null;
            
            refreshItemsList();
            loadItemsList();
            loadMultiItemsList();
            loadCustomerItemsSelect();
            showAlert('Ù…ÙˆÙÙ‚ÛŒØª', 'Ú©Ø§Ù„Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯');
        }

        function addEmployee() {
            const name = document.getElementById('newEmployeeName').value.trim();
            
            if (!name) {
                showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ù¾Ø±Ø³Ù†Ù„ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            const newId = employees.length > 0 ? Math.max(...employees.map(e => e.id)) + 1 : 1;
            employees.push({id: newId, name: name});
            
            document.getElementById('newEmployeeName').value = '';
            selectedEmployeeId = null;
            
            refreshEmployeesList();
            loadEmployeesSelect();
            showAlert('Ù…ÙˆÙÙ‚ÛŒØª', 'Ù¾Ø±Ø³Ù†Ù„ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯');
        }

        function editEmployee() {
            if (!selectedEmployeeId) {
                showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ ÛŒÚ© Ù¾Ø±Ø³Ù†Ù„ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            const name = document.getElementById('newEmployeeName').value.trim();
            
            if (!name) {
                showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ù¾Ø±Ø³Ù†Ù„ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            const empIndex = employees.findIndex(e => e.id === selectedEmployeeId);
            if (empIndex !== -1) {
                employees[empIndex].name = name;
            }
            
            document.getElementById('newEmployeeName').value = '';
            selectedEmployeeId = null;
            
            refreshEmployeesList();
            loadEmployeesSelect();
            showAlert('Ù…ÙˆÙÙ‚ÛŒØª', 'Ù¾Ø±Ø³Ù†Ù„ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ÙˆÛŒØ±Ø§ÛŒØ´ Ø´Ø¯');
        }

        function deleteEmployee() {
            if (!selectedEmployeeId) {
                showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ ÛŒÚ© Ù¾Ø±Ø³Ù†Ù„ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            if (!confirm('Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ù¾Ø±Ø³Ù†Ù„ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ')) {
                return;
            }
            
            const empIndex = employees.findIndex(e => e.id === selectedEmployeeId);
            if (empIndex !== -1) {
                employees.splice(empIndex, 1);
            }
            
            document.getElementById('newEmployeeName').value = '';
            selectedEmployeeId = null;
            
            refreshEmployeesList();
            loadEmployeesSelect();
            showAlert('Ù…ÙˆÙÙ‚ÛŒØª', 'Ù¾Ø±Ø³Ù†Ù„ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯');
        }

        function addCustomer() {
            const name = document.getElementById('newCustomerName').value.trim();
            
            if (!name) {
                showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ù…Ø´ØªØ±ÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            const newId = customers.length > 0 ? Math.max(...customers.map(c => c.id)) + 1 : 1;
            customers.push({id: newId, name: name, balance: 0});
            
            document.getElementById('newCustomerName').value = '';
            selectedCustomerId = null;
            
            refreshCustomersList();
            loadCustomersSelect();
            showAlert('Ù…ÙˆÙÙ‚ÛŒØª', 'Ù…Ø´ØªØ±ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯');
        }

        function editCustomer() {
            if (!selectedCustomerId) {
                showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ ÛŒÚ© Ù…Ø´ØªØ±ÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            const name = document.getElementById('newCustomerName').value.trim();
            
            if (!name) {
                showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ù…Ø´ØªØ±ÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            const custIndex = customers.findIndex(c => c.id === selectedCustomerId);
            if (custIndex !== -1) {
                customers[custIndex].name = name;
            }
            
            document.getElementById('newCustomerName').value = '';
            selectedCustomerId = null;
            
            refreshCustomersList();
            loadCustomersSelect();
            showAlert('Ù…ÙˆÙÙ‚ÛŒØª', 'Ù…Ø´ØªØ±ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ÙˆÛŒØ±Ø§ÛŒØ´ Ø´Ø¯');
        }

        function deleteCustomer() {
            if (!selectedCustomerId) {
                showAlert('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ ÛŒÚ© Ù…Ø´ØªØ±ÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            if (!confirm('Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ù…Ø´ØªØ±ÛŒ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ')) {
                return;
            }
            
            const custIndex = customers.findIndex(c => c.id === selectedCustomerId);
            if (custIndex !== -1) {
                customers.splice(custIndex, 1);
            }
            
            document.getElementById('newCustomerName').value = '';
            selectedCustomerId = null;
            
            refreshCustomersList();
            loadCustomersSelect();
            showAlert('Ù…ÙˆÙÙ‚ÛŒØª', 'Ù…Ø´ØªØ±ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯');
        }

        function init() {
            const today = new Date().toLocaleDateString('fa-IR', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            document.getElementById('currentDate').textContent = today;
            
            loadItemsList();
            loadMultiItemsList();
            loadEmployeesSelect();
            loadCustomersSelect();
            loadCustomerItemsSelect();
            
            document.getElementById('customerSelect').addEventListener('change', updateCustomerBalance);
            
            // event listener Ø¨Ø±Ø§ÛŒ Ø¬Ø³ØªØ¬ÙˆÛŒ Ú©Ø§Ù„Ø§ Ø¯Ø± Ø­Ø§Ù„Øª ØªÚ© Ú©Ø§Ù„Ø§ÛŒÛŒ
            document.getElementById('itemSearch').addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase();
                const itemListDiv = document.getElementById('itemList');
                itemListDiv.style.display = 'block';
                
                document.querySelectorAll('#itemList .item-option').forEach(option => {
                    if (option.textContent.toLowerCase().includes(searchTerm)) {
                        option.style.display = 'block';
                    } else {
                        option.style.display = 'none';
                    }
                });
            });
            
            document.getElementById('itemSearch').addEventListener('click', function() {
                const itemListDiv = document.getElementById('itemList');
                itemListDiv.style.display = 'block';
                
                if (!selectedItem) {
                    this.value = '';
                }
            });
            
            // event listener Ø¨Ø±Ø§ÛŒ Ø¬Ø³ØªØ¬ÙˆÛŒ Ú©Ø§Ù„Ø§ Ø¯Ø± Ø­Ø§Ù„Øª Ú†Ù†Ø¯ Ú©Ø§Ù„Ø§ÛŒÛŒ
            document.getElementById('multiItemSearch').addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase();
                const itemListDiv = document.getElementById('multiItemList');
                itemListDiv.style.display = 'block';
                
                document.querySelectorAll('#multiItemList .item-option').forEach(option => {
                    if (option.textContent.toLowerCase().includes(searchTerm)) {
                        option.style.display = 'block';
                    } else {
                        option.style.display = 'none';
                    }
                });
            });
            
            document.getElementById('multiItemSearch').addEventListener('click', function() {
                const itemListDiv = document.getElementById('multiItemList');
                itemListDiv.style.display = 'block';
                
                if (!currentMultiItem) {
                    this.value = '';
                }
            });
            
            document.addEventListener('click', function(event) {
                const itemListDiv = document.getElementById('itemList');
                const searchInput = document.getElementById('itemSearch');
                
                if (!searchInput.contains(event.target) && !itemListDiv.contains(event.target)) {
                    itemListDiv.style.display = 'none';
                }
                
                const multiItemListDiv = document.getElementById('multiItemList');
                const multiSearchInput = document.getElementById('multiItemSearch');
                
                if (!multiSearchInput.contains(event.target) && !multiItemListDiv.contains(event.target)) {
                    multiItemListDiv.style.display = 'none';
                }
            });
            
            document.getElementById('inventoryType').addEventListener('change', function() {
                const priceInput = document.getElementById('price');
                if (this.value === 'out') {
                    priceInput.placeholder = 'Ø¨Ø±Ø§ÛŒ Ø®Ø±ÙˆØ¬ Ù†ÛŒØ§Ø² Ù†ÛŒØ³Øª';
                    priceInput.disabled = true;
                    priceInput.value = '';
                } else {
                    priceInput.placeholder = 'Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯';
                    priceInput.disabled = false;
                }
            });
            
            document.getElementById('multiInventoryType').addEventListener('change', function() {
                const priceInput = document.getElementById('multiPrice');
                if (this.value === 'out') {
                    priceInput.placeholder = 'Ø¨Ø±Ø§ÛŒ Ø®Ø±ÙˆØ¬ Ù†ÛŒØ§Ø² Ù†ÛŒØ³Øª';
                    priceInput.disabled = true;
                    priceInput.value = '';
                } else {
                    priceInput.placeholder = 'Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯';
                    priceInput.disabled = false;
                }
                
                // Ø¨Ù‡ Ø±ÙˆØ² Ø±Ø³Ø§Ù†ÛŒ Ù†Ù…Ø§ÛŒØ´ Ù„ÛŒØ³Øª
                updateMultiItemsDisplay();
            });
            
            document.getElementById('paymentType').addEventListener('change', function() {
                const periodInput = document.getElementById('period');
                if (this.value !== 'salary') {
                    periodInput.placeholder = 'Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ù†ÙˆØ¹ Ù†ÛŒØ§Ø² Ù†ÛŒØ³Øª';
                    periodInput.disabled = true;
                    periodInput.value = '';
                } else {
                    periodInput.placeholder = 'Ù…Ø«Ø§Ù„: Ù…Ù‡Ø± Û±Û´Û°Û³';
                    periodInput.disabled = false;
                }
            });
            
            document.getElementById('customerTransactionType').addEventListener('change', function() {
                const itemSelect = document.getElementById('customerItemSelect');
                const quantityInput = document.getElementById('customerQuantity');
                const priceInput = document.getElementById('customerPrice');
                const cashAmountInput = document.getElementById('customerCashAmount');
                
                if (this.value === 'buy' || this.value === 'sell') {
                    itemSelect.disabled = false;
                    quantityInput.disabled = false;
                    priceInput.disabled = false;
                    cashAmountInput.disabled = true;
                    cashAmountInput.value = '';
                } else {
                    itemSelect.disabled = true;
                    quantityInput.disabled = true;
                    priceInput.disabled = true;
                    cashAmountInput.disabled = false;
                    itemSelect.value = '';
                    quantityInput.value = '';
                    priceInput.value = '';
                }
            });
            
            console.log('Ø³ÛŒØ³ØªÙ… Ø±Ø³ØªÙˆØ±Ø§Ù† Ø´Ù‚Ø§ÛŒÙ‚ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯.');
        }
        window.onload = init;
    </script>

    <!-- Service Worker Registration -->
    <script>
        // Ø«Ø¨Øª Service Worker Ø¨Ø±Ø§ÛŒ PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('sw.js')
                    .then(function(registration) {
                        console.log('âœ… Service Worker Ø«Ø¨Øª Ø´Ø¯:', registration.scope);
                        
                        // Ø¨Ø±Ø±Ø³ÛŒ Ø¢Ù¾Ø¯ÛŒØª
                        registration.addEventListener('updatefound', () => {
                            console.log('ğŸ”„ Ù†Ø³Ø®Ù‡ Ø¬Ø¯ÛŒØ¯ Service Worker Ù¾ÛŒØ¯Ø§ Ø´Ø¯');
                        });
                    })
                    .catch(function(error) {
                        console.log('âŒ Ø®Ø·Ø§ Ø¯Ø± Ø«Ø¨Øª Service Worker:', error);
                    });
            });
            
            // Ú©Ù†ØªØ±Ù„ ÙˆØ¶Ø¹ÛŒØª Ø¢ÙÙ„Ø§ÛŒÙ†
            window.addEventListener('online', function() {
                console.log('ğŸŒ Ø¢Ù†Ù„Ø§ÛŒÙ† Ø´Ø¯ÛŒØ¯');
                showAlert('Ø§ØªØµØ§Ù„ Ø§ÛŒÙ†ØªØ±Ù†Øª', 'Ø´Ù…Ø§ Ø¢Ù†Ù„Ø§ÛŒÙ† Ù‡Ø³ØªÛŒØ¯');
            });
            
            window.addEventListener('offline', function() {
                console.log('ğŸ“´ Ø¢ÙÙ„Ø§ÛŒÙ† Ø´Ø¯ÛŒØ¯');
                showAlert('Ø¹Ø¯Ù… Ø§ØªØµØ§Ù„', 'Ø´Ù…Ø§ Ø¢ÙÙ„Ø§ÛŒÙ† Ù‡Ø³ØªÛŒØ¯. Ø¨Ø±Ø®ÛŒ Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ Ù…Ù…Ú©Ù† Ø§Ø³Øª Ú©Ø§Ø± Ù†Ú©Ù†Ø¯.');
            });
        }
    </script>
</body>
</html>